<Page
    x:Class="WDCableWUI.UI.FileTransfer.FileTransferPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WDCableWUI.UI.FileTransfer"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

    <ScrollViewer>
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,24">
                <TextBlock x:Uid="FileTransfer_Title"
                      Style="{StaticResource SubtitleTextBlockStyle}"
                      Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
            
            <TextBlock x:Uid="FileTransfer_Description"
                      Style="{StaticResource CaptionTextBlockStyle}"
                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Panel - Send/Receive -->
                <StackPanel Grid.Column="0" Spacing="16">
                    
                    <!-- Send Files Section -->
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                           BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                           BorderThickness="1"
                           CornerRadius="8"
                           Padding="20">
                        <StackPanel Spacing="16">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                         Glyph="&#xE8B5;"
                                         FontSize="20"
                                         Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                <TextBlock x:Uid="FileTransfer_Send_Title"
                                          Style="{StaticResource BodyStrongTextBlockStyle}"/>
                            </StackPanel>
                            
                            <!-- Drag and Drop Area -->
                             <Border x:Name="DropArea"
                                    Background="{ThemeResource SubtleFillColorTransparentBrush}"
                                    BorderBrush="{ThemeResource AccentFillColorDefaultBrush}"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Height="120"
                                    AllowDrop="True"
                                    DragOver="DropArea_DragOver"
                                    Drop="DropArea_Drop">
                                 <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                                     <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                              Glyph="&#xE8E5;"
                                              FontSize="24"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                     <TextBlock x:Uid="FileTransfer_DragDrop_Description"
                                               Style="{StaticResource CaptionTextBlockStyle}"
                                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                 </StackPanel>
                             </Border>
                            
                            <!-- File Selection Button -->
                             <Button x:Name="BrowseFileButton"
                                    x:Uid="FileTransfer_Browse_Button"
                                    Style="{StaticResource AccentButtonStyle}"
                                    HorizontalAlignment="Left"
                                    Click="BrowseFileButton_Click">
                                 <Button.Template>
                                     <ControlTemplate TargetType="Button">
                                         <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="4"
                                                Padding="16,8">
                                             <StackPanel Orientation="Horizontal" Spacing="8">
                                                 <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                          Glyph="&#xE8E5;"
                                                          FontSize="16"/>
                                                 <ContentPresenter/>
                                             </StackPanel>
                                         </Border>
                                     </ControlTemplate>
                                 </Button.Template>
                             </Button>
                            
                            <!-- Selected File Display -->
                             <StackPanel x:Name="SelectedFilePanel" Spacing="8" Visibility="Collapsed">
                                 <TextBlock x:Uid="FileTransfer_SelectedFile_Label"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                 <Border Background="{ThemeResource ControlFillColorDefaultBrush}"
                                        CornerRadius="4"
                                        Padding="12">
                                     <Grid>
                                         <Grid.ColumnDefinitions>
                                             <ColumnDefinition Width="Auto"/>
                                             <ColumnDefinition Width="*"/>
                                             <ColumnDefinition Width="Auto"/>
                                         </Grid.ColumnDefinitions>
                                         <FontIcon Grid.Column="0"
                                                  FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                  Glyph="&#xE8A5;"
                                                  FontSize="16"
                                                  Margin="0,0,8,0"/>
                                         <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                             <TextBlock x:Name="SelectedFileName"
                                                       Style="{StaticResource BodyTextBlockStyle}"/>
                                             <TextBlock x:Name="SelectedFileSize"
                                                       Style="{StaticResource CaptionTextBlockStyle}"
                                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                         </StackPanel>
                                         <Button Grid.Column="2"
                                                Content="&#xE711;"
                                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                FontSize="12"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="4"
                                                Click="RemoveFileButton_Click"/>
                                     </Grid>
                                 </Border>
                             </StackPanel>
                             
                             <!-- Send Button -->
                              <Button x:Name="SendFileButton"
                                     x:Uid="FileTransfer_Send_Button"
                                     HorizontalAlignment="Left"
                                     IsEnabled="False"
                                     Click="SendFileButton_Click">
                                  <Button.Template>
                                      <ControlTemplate TargetType="Button">
                                          <Border x:Name="ButtonBorder"
                                                 Background="{ThemeResource AccentFillColorDefaultBrush}"
                                                 BorderBrush="{ThemeResource AccentFillColorDefaultBrush}"
                                                 BorderThickness="1"
                                                 CornerRadius="4"
                                                 Padding="16,8">
                                              <StackPanel Orientation="Horizontal" Spacing="8">
                                                  <FontIcon x:Name="ButtonIcon"
                                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                           Glyph="&#xE724;"
                                                           FontSize="16"
                                                           Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"/>
                                                  <ContentPresenter x:Name="ContentPresenter"
                                                                   Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"/>
                                              </StackPanel>
                                              <VisualStateManager.VisualStateGroups>
                                                  <VisualStateGroup x:Name="CommonStates">
                                                      <VisualState x:Name="Normal"/>
                                                      <VisualState x:Name="PointerOver">
                                                          <Storyboard>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBorder" Storyboard.TargetProperty="Background">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AccentFillColorSecondaryBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                          </Storyboard>
                                                      </VisualState>
                                                      <VisualState x:Name="Pressed">
                                                          <Storyboard>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBorder" Storyboard.TargetProperty="Background">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AccentFillColorTertiaryBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                          </Storyboard>
                                                      </VisualState>
                                                      <VisualState x:Name="Disabled">
                                                          <Storyboard>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBorder" Storyboard.TargetProperty="Background">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ControlFillColorDisabledBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBorder" Storyboard.TargetProperty="BorderBrush">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ControlStrokeColorDefaultBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextFillColorDisabledBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonIcon" Storyboard.TargetProperty="Foreground">
                                                                  <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextFillColorDisabledBrush}"/>
                                                              </ObjectAnimationUsingKeyFrames>
                                                          </Storyboard>
                                                      </VisualState>
                                                  </VisualStateGroup>
                                              </VisualStateManager.VisualStateGroups>
                                          </Border>
                                      </ControlTemplate>
                                  </Button.Template>
                              </Button>
                        </StackPanel>
                    </Border>
                    
                    <!-- Receive Settings Section -->
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                           BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                           BorderThickness="1"
                           CornerRadius="8"
                           Padding="20">
                        <StackPanel Spacing="16">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                         Glyph="&#xE896;"
                                         FontSize="20"
                                         Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                <TextBlock x:Uid="FileTransfer_Receive_Title"
                                          Style="{StaticResource BodyStrongTextBlockStyle}"/>
                            </StackPanel>
                            
                            <StackPanel Spacing="8">
                                <TextBlock x:Uid="FileTransfer_DownloadLocation_Label"
                                          Style="{StaticResource CaptionTextBlockStyle}"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="DownloadLocationTextBox"
                                            Grid.Column="0"
                                            IsReadOnly="False"
                                            Margin="0,0,8,0"
                                            TextChanged="DownloadLocationTextBox_TextChanged"/>
                                    <Button x:Name="BrowseDownloadLocationButton"
                                           Grid.Column="1"
                                           x:Uid="FileTransfer_Browse_Button"
                                           Click="BrowseDownloadLocationButton_Click"/>
                                </Grid>
                            </StackPanel>
                            
                            <TextBlock x:Uid="FileTransfer_AutoReceive_Description"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Panel - Transfer Records -->
                <Border Grid.Column="2"
                       Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                       BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Padding="20">
                    <StackPanel Spacing="16">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                     Glyph="&#xE81C;"
                                     FontSize="20"
                                     Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                            <TextBlock x:Uid="FileTransfer_Records_Title"
                                      Style="{StaticResource BodyStrongTextBlockStyle}"/>
                        </StackPanel>
                        
                        <!-- Filter Buttons -->
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <ToggleButton x:Name="ShowAllToggle"
                                         x:Uid="FileTransfer_Filter_All"
                                         IsChecked="True"
                                         Click="FilterToggle_Click"
                                         Tag="All"/>
                            <ToggleButton x:Name="ShowSentToggle"
                                         x:Uid="FileTransfer_Filter_Sent"
                                         Click="FilterToggle_Click"
                                         Tag="Sent"/>
                            <ToggleButton x:Name="ShowReceivedToggle"
                                         x:Uid="FileTransfer_Filter_Received"
                                         Click="FilterToggle_Click"
                                         Tag="Received"/>
                        </StackPanel>
                        
                        <!-- Transfer Records List -->
                        <ListView x:Name="TransferRecordsList"
                                 Background="{ThemeResource ControlFillColorDefaultBrush}"
                                 CornerRadius="4"
                                 Padding="8"
                                 MinHeight="300">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{ThemeResource SubtleFillColorTransparentBrush}"
                                           CornerRadius="4"
                                           Padding="12"
                                           Margin="0,2">
                                        <StackPanel Spacing="4">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <FontIcon Grid.Column="0"
                                                         FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                         Glyph="{Binding TypeIcon}"
                                                         FontSize="14"
                                                         Foreground="{Binding StatusColor}"
                                                         Margin="0,0,8,0"/>
                                                
                                                <TextBlock Grid.Column="1"
                                                          Text="{Binding FileName}"
                                                          Style="{StaticResource CaptionTextBlockStyle}"
                                                          TextTrimming="CharacterEllipsis"/>
                                                
                                                <TextBlock Grid.Column="2"
                                                          Text="{Binding Status}"
                                                          Style="{StaticResource CaptionTextBlockStyle}"
                                                          Foreground="{Binding StatusColor}"/>
                                            </Grid>
                                            
                                            <TextBlock Text="{Binding TimeStamp}"
                                                      Style="{StaticResource CaptionTextBlockStyle}"
                                                      Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                                      FontSize="10"/>
                                            
                                            <ProgressBar Value="{Binding Progress}"
                                                        Maximum="100"
                                                        Height="4"
                                                        Visibility="{Binding ProgressVisibility}"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                        
                        <!-- Clear Records Button -->
                        <Button x:Name="ClearRecordsButton"
                               Content="Clear All Records"
                               HorizontalAlignment="Stretch"
                               Click="ClearRecordsButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           BorderBrush="{TemplateBinding BorderBrush}"
                                           BorderThickness="{TemplateBinding BorderThickness}"
                                           CornerRadius="4"
                                           Padding="12,8">
                                        <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                     Glyph="&#xE74D;"
                                                     FontSize="14"/>
                                            <ContentPresenter/>
                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>